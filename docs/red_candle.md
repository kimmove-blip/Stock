# 📈 장대양봉 스크리닝 프로그램 v2.0

다음 거래일에 **장대양봉(Long Bullish Candle)**이 형성될 가능성이 높은 종목을 스크리닝하는 파이썬 프로그램입니다.

## 🎯 핵심 원리

1. **"거래량은 주가의 선행 지표"** - 세력의 매집과 이탈을 거래량으로 추적
2. **"에너지의 응축 후 발산"** - 횡보/수축 구간 후 폭발적 상승 패턴 포착

## 📊 스크리닝 기법 (6가지)

### 1. 거래량 급감 눌림목 (N자형 상승 패턴)
- 최근 3일 내 **거래량 200% 이상 폭증 + 장대양봉(+7% 이상)** 발생
- 이후 **거래량 급감 + 단봉 캔들** 형성
- 피보나치 되돌림 지지선 (38.2%, 50%, 61.8%) 확인

### 2. 볼린저 밴드 수축 후 돌파
- 밴드폭이 20일 평균보다 좁아지는 **스퀴즈(Squeeze)** 감지
- 밴드 상단 70% 이상 위치 시 **돌파 준비** 신호

### 3. 이동평균선 밀집 정배열
- 5일, 10일, 20일선 **밀집도 2% 이내**
- **정배열** (5 > 10 > 20) 확인
- **골든크로스** 감지 (5/10, 5/20, 20/60)

### 4. OBV 다이버전스 (매집 신호)
- 주가 횡보/하락 중 **OBV 상승** = 세력 매집
- 가장 강력한 매수 신호 중 하나

### 5. RSI/MACD 모멘텀 신호
- **RSI 과매도(30) 탈출**
- **MACD 골든크로스**
- **스토캐스틱 골든크로스**

### 6. 매물대 분석
- 상방 5% 내 **거래량 집중 구간** 확인
- 매물대 없으면 **상승 여력 충분**

---

## 🚀 사용법

### 필수 패키지 설치
```bash
pip install yfinance pandas numpy
```

### 기본 실행
```bash
python long_bullish_screener_v2.py
```

### 코드에서 직접 사용
```python
from long_bullish_screener_v2 import LongBullishCandleScreener

# 스크리너 초기화
screener = LongBullishCandleScreener(lookback_days=120)

# 단일 종목 분석
analysis = screener.analyze_stock('005930.KS')  # 삼성전자
screener.print_report(analysis)

# 여러 종목 스크리닝
tickers = ['005930.KS', '000660.KS', '035420.KS']
results = screener.screen_stocks(tickers, min_score=60)
print(results)
```

### CSV 데이터 사용
```python
screener = LongBullishCandleScreener(
    data_source='csv',
    csv_folder='./my_data'
)

# CSV 파일 형식:
# Date,Open,High,Low,Close,Volume
# 2024-01-01,50000,51000,49000,50500,1000000
```

---

## 📋 종목 코드 형식

| 시장 | 형식 | 예시 |
|------|------|------|
| KOSPI | 종목코드.KS | 005930.KS (삼성전자) |
| KOSDAQ | 종목코드.KQ | 247540.KQ (에코프로비엠) |
| 미국 | 심볼 | AAPL, MSFT, NVDA |

---

## 🎯 점수 체계

| 등급 | 점수 | 추천 |
|------|------|------|
| A+ | 180+ | ★★★★★ 매우 강력 |
| A | 150+ | ★★★★☆ 강력 |
| B+ | 120+ | ★★★☆☆ 추천 |
| B | 90+ | ★★☆☆☆ 관심 |
| C | 60+ | ★☆☆☆☆ 관망 |
| D | 60 미만 | ☆☆☆☆☆ 비추천 |

### 세부 점수 배분

| 분석 항목 | 최대 점수 | 주요 조건 |
|-----------|----------|----------|
| 눌림목 패턴 | 100 | 거래량급감+단봉+지지확인+OBV유지 |
| 볼린저 밴드 | 80 | 극심한수축+상단근접+돌파준비 |
| 이동평균선 | 95 | 정배열+밀집+골든크로스 |
| OBV | 80 | 강한다이버전스+상승추세 |
| 모멘텀 | 100 | RSI탈출+MACD+스토캐스틱 |
| 매물대 | 40 | 상방저항없음+고점근접 |
| 추세 | 25 | 강한상승추세 |

---

## ⚙️ 파라미터 조정

```python
screener = LongBullishCandleScreener()

# 장대양봉 기준 변경 (기본 7%)
screener.set_param('long_bullish_min_pct', 10)

# 거래량 폭증 기준 (기본 2배)
screener.set_param('vol_surge_threshold', 2.5)

# 이평선 밀집 기준 (기본 2%)
screener.set_param('ma_convergence_threshold', 1.5)
```

### 전체 파라미터

| 파라미터 | 기본값 | 설명 |
|----------|--------|------|
| `long_bullish_min_pct` | 7 | 장대양봉 최소 상승률 (%) |
| `vol_surge_threshold` | 2.0 | 거래량 폭증 기준 (배수) |
| `vol_shrink_threshold` | 0.5 | 거래량 급감 기준 (배수) |
| `vol_ratio_low` | 0.8 | 눌림목 거래량 비율 |
| `small_candle_threshold` | 3 | 단봉 기준 (%) |
| `ma_convergence_threshold` | 2 | 이평선 밀집 기준 (%) |
| `rsi_oversold` | 30 | RSI 과매도 기준 |
| `resistance_range_pct` | 5 | 매물대 탐색 범위 (%) |

---

## 📊 출력 예시

```
======================================================================
📊 AAPL 장대양봉 가능성 분석
======================================================================
날짜: 2025-01-24 | 종가: 223 | 등락: 1.5%
거래량 비율: 1.23x (20일 평균 대비)
----------------------------------------------------------------------

🎯 총점: 145점 | ★★★★☆ 강력

----------------------------------------------------------------------
📌 세부 분석
----------------------------------------------------------------------

1️⃣ 눌림목 패턴 (점수: 65)
   최근 장대양봉: 1회
   ✓ 거래량 급감 (45%)
   ✓ 단봉 캔들 (1.2%)
   ✓ 38.2% 지지
   ✓ OBV 상승 유지

2️⃣ 볼린저 밴드 (점수: 45)
   밴드폭: 8.5% | 위치: 78%
   ✓ 밴드 수축
   ✓ 상위권 (78%)
   ✓ 돌파 준비

...

----------------------------------------------------------------------
🚀 감지된 신호:
   1. 눌림목 패턴 (38.2% 지지)
   2. 볼린저 돌파 준비
   3. OBV 매집 신호
   4. MACD 골든크로스
======================================================================
```

---

## ⚠️ 주의사항

1. **기술적 분석의 한계**: 100% 정확한 예측은 불가능합니다.
2. **하락 추세 첫 장대양봉 주의**: 기술적 반등일 수 있음
3. **매물대 저항**: 윗꼬리가 달릴 수 있음
4. **투자 결정**: 반드시 다른 분석과 병행하세요

---

## 📁 파일 구조

```
long_bullish_screener_v2.py   # 메인 프로그램
README.md                      # 사용 가이드
data/                          # CSV 데이터 폴더 (선택)
```

---

## 🔄 업데이트 내역

### v2.0 (2025-01-24)
- 피보나치 되돌림 지지선 추가
- 스토캐스틱 지표 추가
- 샘플 데이터 테스트 기능
- 파라미터 조정 기능
- 상세 리포트 개선

### v1.0 (초기 버전)
- 기본 스크리닝 기능

---

## 📜 라이선스

MIT License - 자유롭게 사용하세요.

---

## 💡 추천 사용 시나리오

### 매일 장 마감 후 루틴

1. **18:00** - 프로그램 실행, 관심 종목 스크리닝
2. **리스트 확인** - 점수 120점 이상 종목 체크
3. **상세 분석** - 신호 내용과 경고 확인
4. **다음날 대응**:
   - 시초가가 지지선 위에서 시작
   - 장 초반 거래량 증가 확인
   - 눌림목에서 진입

### 주간 루틴

1. 월요일: 전주 장대양봉 종목 리스트업
2. 화~금: 눌림목 진입 종목 모니터링
3. 금요일: 신규 장대양봉 종목 발굴
